var WorldTrackingModule=function(n,t,r,_,a,o){"use strict";function e(e,t,_,r){var n,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,_):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,_,r);else for(var T=e.length-1;0<=T;T--)(n=e[T])&&(o=(a<3?n(o):3<a?n(t,_,o):n(t,_))||o);return 3<a&&o&&Object.defineProperty(t,_,o),o}var T;(T=n.ARTrackableType||(n.ARTrackableType={}))["UNKNOWN"]="UNKNOWN",T["VERTICAL_PLANE"]="VERTICAL_PLANE",T["HORIZONTAL_PLANE"]="HORIZONTAL_PLANE",T["FEATURE_POINT"]="FEATURE_POINT",T["REMOTE"]="REMOTE";var i,l={0:n.ARTrackableType.UNKNOWN,1:n.ARTrackableType.VERTICAL_PLANE,2:n.ARTrackableType.HORIZONTAL_PLANE,3:n.ARTrackableType.FEATURE_POINT,4:n.ARTrackableType.REMOTE};(i=n.ARTrackableState||(n.ARTrackableState={}))["INITIALIZING"]="INITIALIZING",i["TRACKING"]="TRACKING",i["LOCALIZATION_ERROR"]="LOCALIZATION_ERROR",i["MAP_UNAVAILABLE_ERROR"]="MAP_UNAVAILABLE_ERROR",i["NETWORK_ERROR"]="NETWORK_ERROR",i["UNKNOWN_ERROR"]="UNKNOWN_ERROR";var N,c={0:n.ARTrackableState.INITIALIZING,1:n.ARTrackableState.TRACKING,2:n.ARTrackableState.LOCALIZATION_ERROR,3:n.ARTrackableState.MAP_UNAVAILABLE_ERROR,4:n.ARTrackableState.NETWORK_ERROR,5:n.ARTrackableState.UNKNOWN_ERROR};(N=n.TrackingStateReason||(n.TrackingStateReason={}))["NONE"]="NONE",N["INITIALIZING"]="INITIALIZING",N["EXCESSIVE_MOTION"]="EXCESSIVE_MOTION",N["INSUFFICIENT_LIGHT"]="INSUFFICIENT_LIGHT",N["INSUFFICIENT_FEATURES"]="INSUFFICIENT_FEATURES";var I,A={0:n.TrackingStateReason.NONE,1:n.TrackingStateReason.INITIALIZING,2:n.TrackingStateReason.EXCESSIVE_MOTION,3:n.TrackingStateReason.INSUFFICIENT_LIGHT,4:n.TrackingStateReason.INSUFFICIENT_FEATURES};(I=n.HitTestType||(n.HitTestType={}))["HORIZONTAL_PLANE"]="HORIZONTAL_PLANE",I["VERTICAL_PLANE"]="VERTICAL_PLANE",I["ANY_PLANE"]="ANY_PLANE",I["FEATURE_POINT"]="FEATURE_POINT";var E,R,u={HORIZONTAL_PLANE:0,VERTICAL_PLANE:1,ANY_PLANE:2,FEATURE_POINT:3};n.HitTestType.HORIZONTAL_PLANE,n.HitTestType.VERTICAL_PLANE,n.HitTestType.ANY_PLANE,n.HitTestType.FEATURE_POINT;(R=E=E||{})["N_O_T__T_R_A_C_K_I_N_G"]="N_O_T__T_R_A_C_K_I_N_G",R["L_O_W"]="L_O_W",R["M_E_D_I_U_M"]="M_E_D_I_U_M",R["H_I_G_H"]="H_I_G_H";var O,p;E.N_O_T__T_R_A_C_K_I_N_G,E.L_O_W,E.M_E_D_I_U_M,E.H_I_G_H;(p=O=O||{})["N_O_T__T_R_A_C_K_I_N_G"]="N_O_T__T_R_A_C_K_I_N_G",p["L_O_W"]="L_O_W",p["H_I_G_H"]="H_I_G_H";var d,S;O.N_O_T__T_R_A_C_K_I_N_G,O.L_O_W,O.H_I_G_H;(S=d=d||{})["NONE"]="NONE",S["RELOCALIZING"]="RELOCALIZING",S["EXCESSIVE_MOTION"]="EXCESSIVE_MOTION",S["INITIALIZING"]="INITIALIZING",S["INSUFFICIENT_FEATURES"]="INSUFFICIENT_FEATURES",S["INSUFFICIENT_LIGHT"]="INSUFFICIENT_LIGHT",S["BAD_STATE"]="BAD_STATE",S["UNKNOWN"]="UNKNOWN";var L,s;d.NONE,d.RELOCALIZING,d.EXCESSIVE_MOTION,d.INITIALIZING,d.INSUFFICIENT_FEATURES,d.INSUFFICIENT_LIGHT,d.BAD_STATE,d.UNKNOWN;(s=L=L||{})["N_O_N_E"]="N_O_N_E",s["P_L_A_T_F_O_R_M__S_L_A_M"]="P_L_A_T_F_O_R_M__S_L_A_M",s["V_I_P_E_R_L_I_T_E"]="V_I_P_E_R_L_I_T_E",s["W_O_L_F__O_U_T_P_U_T__P_L_A_T_F_O_R_M__S_L_A_M"]="W_O_L_F__O_U_T_P_U_T__P_L_A_T_F_O_R_M__S_L_A_M",s["W_O_L_F__O_U_T_P_U_T__V_I_P_E_R_L_I_T_E"]="W_O_L_F__O_U_T_P_U_T__V_I_P_E_R_L_I_T_E";var f;L.N_O_N_E,L.P_L_A_T_F_O_R_M__S_L_A_M,L.V_I_P_E_R_L_I_T_E,L.W_O_L_F__O_U_T_P_U_T__P_L_A_T_F_O_R_M__S_L_A_M,L.W_O_L_F__O_U_T_P_U_T__V_I_P_E_R_L_I_T_E;(f=n.TrackingState||(n.TrackingState={}))["NOT_AVAILABLE"]="NOT_AVAILABLE",f["LIMITED"]="LIMITED",f["TRACKING"]="TRACKING";var b,P,g={0:n.TrackingState.NOT_AVAILABLE,1:n.TrackingState.LIMITED,2:n.TrackingState.TRACKING};(P=b=b||{})["TAP"]="TAP",P["PAN"]="PAN",P["PINCH"]="PINCH",P["ROTATE"]="ROTATE",P["LONG_PRESS"]="LONG_PRESS",P["RAW_TOUCH"]="RAW_TOUCH";var y,C;b.TAP,b.PAN,b.PINCH,b.ROTATE,b.LONG_PRESS,b.RAW_TOUCH;(C=y=y||{})["BEGAN"]="BEGAN",C["CHANGED"]="CHANGED",C["ENDED"]="ENDED",C["CANCELED"]="CANCELED",C["FAILED"]="FAILED";var k,v,m={BEGAN:0,CHANGED:1,ENDED:2,CANCELED:3,FAILED:4};y.BEGAN,y.CHANGED,y.ENDED,y.CANCELED,y.FAILED;(v=k=k||{})["RAY_CAST"]="RAY_CAST",v["SHADER_PICK"]="SHADER_PICK";k.RAY_CAST,k.SHADER_PICK;function U(e){return r.getCoreModule().mapStringToScalar(o.ref(e),m,3)}var F=t.getNativeModule("WorldTracking"),H={};function G(e){if(!H[e]){var t=function(e){var t=r.model.graph.get(e);if(t)return new h(t)}(new r.model.NodeId(e));t&&(H[e]=t)}return H[e]}function M(e,t){return o.getReactiveModule().point(a.fromMeters(e.getScalarSignal(t+"/x")),a.fromMeters(e.getScalarSignal(t+"/y")),a.fromMeters(e.getScalarSignal(t+"/z")))}var h=(Object.defineProperty(D.prototype,"id",{get:function(){var e=this._ref.constants.identifier;return e?t.getModule("Reactive").val(e):this._ref.getStringSignal("identifier")},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"transform",{get:function(){return this._ref.getTransformSignal("transform")},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"type",{get:function(){return r.mapScalarToString(this._ref.getScalarSignal("type"),l,n.ARTrackableType.UNKNOWN)},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"center",{get:function(){return M(this._ref,"center")},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"extent",{get:function(){return M(this._ref,"extent")},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"normal",{get:function(){return M(this._ref,"normal")},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"isTracked",{get:function(){return this._ref.getBoolSignal("isTracked")},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"state",{get:function(){return r.mapScalarToString(this._ref.getScalarSignal("state"),c,n.ARTrackableState.UNKNOWN_ERROR)},enumerable:!0,configurable:!0}),e([t.internal,t.nonenumerable],D.prototype,"_ref",void 0),e([t.capability("worldTrackerJSAPI"),t.introducedBy(2694176835)],D.prototype,"state",null),D);function D(e){this._ref=e}var W=(Object.defineProperty(K.prototype,"transform",{get:function(){return new o.TransformSignal(F.referencePointTransform(this._id))},enumerable:!0,configurable:!0}),K.prototype.move=function(e){var t,_,r;F.moveReferencePoint(this._id,o.ref(e.screenLocation),U(e.state),null!=(t=null==e?void 0:e.snapToPlane)&&t,u[null!=(_=null==e?void 0:e.planeType)?_:n.HitTestType.ANY_PLANE],null!=(r=null==e?void 0:e.fallbackToEstimatedPlanes)&&r)},Object.defineProperty(K.prototype,"plane",{get:function(){return new h(new r.model.ModelRef(this._planeId,"trackable",{}))},enumerable:!0,configurable:!0}),e([t.internal,t.nonenumerable],K.prototype,"_id",void 0),e([t.internal,t.nonenumerable],K.prototype,"_planeId",void 0),K);function K(e,t){this._id=e,this._planeId=t}var V=(Object.defineProperty(Z.prototype,"intersectionPoint",{get:function(){return this._res.position},enumerable:!0,configurable:!0}),Object.defineProperty(Z.prototype,"trackable",{get:function(){var e=G(this._res.trackableId);if(!e)throw"Trackable in HitTestResult is no longer valid.";return e},enumerable:!0,configurable:!0}),e([t.nonenumerable],Z.prototype,"_res",void 0),Z);function Z(e){this._res=e}var j=(w.prototype.addReferencePoint=function(e){var t,_;return o.eventSourceToPromise(F.addReferencePoint(e.worldPosition.x,e.worldPosition.y,e.worldPosition.z,null!=(_=null===(t=e.trackable)||void 0===t?void 0:t._ref.id.value)?_:0)).then(function(e){return new W(e.id,new r.model.NodeId(e.plane))})},w.prototype.deleteReferencePoint=function(e){F.deleteReferencePoint(e._id)},w.prototype.onTrackableAdded=function(){var e;return null!=(e=this._onTrackableAdded)?e:this._onTrackableAdded=o.mapEventSource(r.model.graph.onChildConnected(new r.model.NodeId(_.trackablesChildrenNodeId)),function(e){return G(e.id.value)})},w.prototype.onTrackableDeleted=function(){var e;return null!=(e=this._onTrackableDeleted)?e:this._onTrackableDeleted=o.mapEventSource(r.model.graph.onChildDisconnected(new r.model.NodeId(_.trackablesChildrenNodeId)),function(e){return G(e.id.value)})},w.prototype.hitTest=function(e){var t,_;return o.eventSourceToPromise(F.hitTest(o.ref(e.screenLocation),u[null!=(t=null==e?void 0:e.hitTestType)?t:n.HitTestType.ANY_PLANE],null!=(_=null==e?void 0:e.fallbackToEstimatedPlanes)&&_)).then(function(e){return e.map(function(e){return new V(e)})})},Object.defineProperty(w.prototype,"realWorldScaleActive",{get:function(){return new o.BoolSignal(F.realWorldScaleActive())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"realWorldScaleSupported",{get:function(){return new o.BoolSignal(F.realWorldScaleSupported())},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"state",{get:function(){return r.mapScalarToString(F.state(),g,n.TrackingState.NOT_AVAILABLE)},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"stateReason",{get:function(){return r.mapScalarToString(F.stateReason(),A,n.TrackingStateReason.NONE)},enumerable:!0,configurable:!0}),e([t.enumAccessor],w.prototype,"ARTrackableType",void 0),e([t.enumAccessor],w.prototype,"ARTrackableState",void 0),e([t.enumAccessor],w.prototype,"HitTestType",void 0),e([t.enumAccessor],w.prototype,"TrackingState",void 0),e([t.enumAccessor],w.prototype,"TrackingStateReason",void 0),e([t.nonenumerable],w.prototype,"_onTrackableAdded",void 0),e([t.nonenumerable],w.prototype,"_onTrackableDeleted",void 0),w=e([t.scriptingModule("WorldTracking")],w));function w(){this.ARTrackableType=n.ARTrackableType,this.ARTrackableState=n.ARTrackableState,this.HitTestType=n.HitTestType,this.TrackingState=n.TrackingState,this.TrackingStateReason=n.TrackingStateReason}return n.ARReferencePoint=W,n.ARTrackable=h,n.HitTestResult=V,n.WorldTrackingModule=j,n.toInternalGestureState=U,n}({},arfx,CoreModule,params,UnitsModule,ReactiveModule);